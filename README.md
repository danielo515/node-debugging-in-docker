# Node debugging in docker
#### Ejercicio para aprender a hacer debugging de aplicaciones node-js dentro de contenedores docker
#### Created by: Danielo Rodríguez Rivero
#### Keywords: rest,microservice, tutorial

# Lección 03 - Bug on startup

Hasta ahora hemos estado levantando nuestra imagen de debugging, hemos esperado a que se levantase el backend y una vez levantado nos hemos conectado al debugger mediante distintas técnicas (Chrome, y VSCode) y hemos empezado a hacer debugging. <br>
Pero... ¿Qué ocurre cuando el backend no se levanta correctamente? ¿Y si ocurre un error inesperado que tumba el backend antes de que podamos siquiera conectarnos al debugger ?

En esta lección se han introducido algunos bugs que impiden que el servicio se levante correctamente, por lo que es posible que no tengáis tiempo de conectar al debugger para ver dónde está el fallo. 
Reglas a cumplir:

* Se deberá encontrar el error haciendo debugging y corregirlo.
* No está permitido utilizar técnicas de debugging arcaicas como múltiples console.log en varios sitios
* No se debe encontrar el error mirando todos los archivos fuente no con ayuda de linters

Es tarea del alumno configurar `node.js` para poder hacer debugging antes de que el error impida el inicio del servicio.

* Debéis construir de nuevo la imagen de docker para que los cambios tengan efecto (tanto al principio del ejercicio como después de aplicar vuestros cambios).
* Después podéis ejecutar el mismo comando que en la lección anterior para probar la nueva imagen.
* Si lo habéis hecho de forma correcta, deberíais ver en el log del contenedor que el debugger está a la escucha y deberíais poder conectar mediante el debugger de VSCode.

## Commands reference

* `npm run build` en cualquiera de las ramas construye la imagen de docker
* `npm run docker-start` ejecuta el contenedor en modo interactivo (para poder ver los logs). Asegúrate de **construir la imagen primero!**
* `npm start` Start the server 
* `npm run start-dev` Start the server on dev mode 
* `npm test` Run tests 
* `git checkout master` para volver a las instrucciones básicas 
* `git checkout 01-basic-way` para ir a la primera lección
* `git checkout 02-debugging-with-vsc` para ir a la segunda lección
* `git checkout 03-bug-on-startup` para ir a la tercera lección
* `git checkout 04-configurable-debugging` para ir a la cuarta lección
* `git checkout 05-already-running-container` para ir a la quinta lección
* With the server running, open `http://localhost:3000/version` to see the version of your package
* With the server running, open `http://localhost:3000/documentation` to see the documentation of your API

The example microservice that is used for exploring the different scenarios was generated by the [Hapi Swagger ES6 Generator](https://github.com/danielo515/generator-hapi-swagger-es6)
